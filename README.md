# GoodMorningBot

Telegram –±–æ—Ç, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ —É—Ç—Ä–µ–Ω–Ω–∏–µ –∏ –≤–µ—á–µ—Ä–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è —Å –º–æ—Ç–∏–≤–∏—Ä—É—é—â–∏–º–∏ —Ü–∏—Ç–∞—Ç–∞–º–∏ –∏ –∫—Ä–∞—Å–∏–≤—ã–º–∏ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è–º–∏.

## –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

- –û—Ç–ø—Ä–∞–≤–∫–∞ –µ–∂–µ–¥–Ω–µ–≤–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω–æ–µ –≤—Ä–µ–º—è
  - –£—Ç—Ä–µ–Ω–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ 8:00
  - –í–µ—á–µ—Ä–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ 21:00
- –°–ª—É—á–∞–π–Ω—ã–µ –º–æ—Ç–∏–≤–∏—Ä—É—é—â–∏–µ —Ü–∏—Ç–∞—Ç—ã –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ (API Forismatic)
- –ö—Ä–∞—Å–∏–≤—ã–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è (API Unsplash)
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≥—Ä—É–ø–ø–æ–≤—ã—Ö —á–∞—Ç–æ–≤ –∏ –ª–∏—á–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç (–∂–∏—Ä–Ω—ã–π —à—Ä–∏—Ñ—Ç, —Ü–∏—Ç–∞—Ç—ã, –∫—É—Ä—Å–∏–≤)
- –ö–æ–º–∞–Ω–¥–∞ `/citation` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ª—É—á–∞–π–Ω–æ–π —Ü–∏—Ç–∞—Ç—ã –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞

1. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `appsettings.json` –≤ –∫–æ—Ä–Ω–µ–≤–æ–π –ø–∞–ø–∫–µ –ø—Ä–æ–µ–∫—Ç–∞:

```json
{
  "ConnectionStrings": {
    "DefaultConnection": "Server=(localdb)\\mssqllocaldb;Database=GoodMorningBot;Trusted_Connection=True;MultipleActiveResultSets=true"
  },
  "BotConfiguration": {
    "TelegramBotToken": "–í–ê–®_–¢–û–ö–ï–ù_–ë–û–¢–ê",
    "UnsplashApiKey": "–í–ê–®_–ö–õ–Æ–ß_API_UNSPLASH"
  }
}
```

2. –ü–æ–ª—É—á–∏—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ API –∫–ª—é—á–∏:
   - Telegram Bot Token: –°–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ [@BotFather](https://t.me/BotFather)
   - Unsplash API Key: –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ [Unsplash Developers](https://unsplash.com/developers)

3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ .NET 8.0 SDK

4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:
```bash
dotnet ef database update
```

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏

–í—Ä–µ–º—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ CRON-–≤—ã—Ä–∞–∂–µ–Ω–∏–µ –≤ —Ñ–∞–π–ª–µ `Program.cs`. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ:
- –£—Ç—Ä–µ–Ω–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ: 8:00 –ø–æ –º–æ—Å–∫–æ–≤—Å–∫–æ–º—É –≤—Ä–µ–º–µ–Ω–∏
- –í–µ—á–µ—Ä–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ: 21:00 –ø–æ –º–æ—Å–∫–æ–≤—Å–∫–æ–º—É –≤—Ä–µ–º–µ–Ω–∏

–ü—Ä–∏–º–µ—Ä—ã CRON-–≤—ã—Ä–∞–∂–µ–Ω–∏–π:
```csharp
// –ö–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 9:00
"0 0 8 * * ?"

// –ö–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 21:00
"0 0 21 * * ?"

// –ö–∞–∂–¥—ã–µ 30 –º–∏–Ω—É—Ç (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
"0 */30 * * * ?"

// –ö–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
"0 * * * * ?"
```

–î–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ –Ω–∞–π–¥–∏—Ç–µ –≤ `Program.cs` –º–µ—Ç–æ–¥ `ConfigureServices` –∏ –∏–∑–º–µ–Ω–∏—Ç–µ CRON-–≤—ã—Ä–∞–∂–µ–Ω–∏—è:

```csharp
// –£—Ç—Ä–µ–Ω–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
q.AddTrigger(opts => opts
    .ForJob(morningJobKey)
    .WithIdentity("MorningMessageTrigger")
    .WithCronSchedule("0 0 8 * * ?", x => x
        .InTimeZone(TimeZoneInfo.FindSystemTimeZoneById("Russian Standard Time")))
);

// –í–µ—á–µ—Ä–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
q.AddTrigger(opts => opts
    .ForJob(eveningJobKey)
    .WithIdentity("EveningMessageTrigger")
    .WithCronSchedule("0 0 21 * * ?", x => x
        .InTimeZone(TimeZoneInfo.FindSystemTimeZoneById("Russian Standard Time")))
);
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç:
```bash
dotnet run
```

2. –î–æ–±–∞–≤—å—Ç–µ –±–æ—Ç–∞ –≤ —á–∞—Ç –∏–ª–∏ –Ω–∞—á–Ω–∏—Ç–µ —Å –Ω–∏–º –ª–∏—á–Ω—É—é –ø–µ—Ä–µ–ø–∏—Å–∫—É

3. –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:
   - `/start` - –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å —Ä–∞—Å—Å—ã–ª–∫—É –≤ —Ç–µ–∫—É—â–µ–º —á–∞—Ç–µ
   - `/citation` - –ø–æ–ª—É—á–∏—Ç—å —Å–ª—É—á–∞–π–Ω—É—é —Ü–∏—Ç–∞—Ç—É —Å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–µ–π –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç

## –§–æ—Ä–º–∞—Ç —Å–æ–æ–±—â–µ–Ω–∏–π

### –£—Ç—Ä–µ–Ω–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ (9:00):
- **–ñ–∏—Ä–Ω—ã–π** —Ç–µ–∫—Å—Ç –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è "–î–æ–±—Ä–æ–µ —É—Ç—Ä–æ!"
- –°–ª—É—á–∞–π–Ω–∞—è –∫—Ä–∞—Å–∏–≤–∞—è —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è —Å —Å–æ–ª–Ω—ã—à–∫–æ–º ‚òÄÔ∏è
- –¶–∏—Ç–∞—Ç–∞ –¥–Ω—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ `—Ü–∏—Ç–∞—Ç—ã`
- _–ö—É—Ä—Å–∏–≤–æ–º_ –≤—ã–¥–µ–ª–µ–Ω–Ω–æ–µ –∏–º—è –∞–≤—Ç–æ—Ä–∞ —Ü–∏—Ç–∞—Ç—ã

### –í–µ—á–µ—Ä–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ (21:00):
- **–ñ–∏—Ä–Ω—ã–π** —Ç–µ–∫—Å—Ç –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è "–î–æ–±—Ä–æ–π –Ω–æ—á–∏!"
- –°–ª—É—á–∞–π–Ω–∞—è –∫—Ä–∞—Å–∏–≤–∞—è —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è —Å –ª—É–Ω–æ–π üåô
- –¶–∏—Ç–∞—Ç–∞ –Ω–∞ –Ω–æ—á—å –≤ —Ñ–æ—Ä–º–∞—Ç–µ `—Ü–∏—Ç–∞—Ç—ã`
- _–ö—É—Ä—Å–∏–≤–æ–º_ –≤—ã–¥–µ–ª–µ–Ω–Ω–æ–µ –∏–º—è –∞–≤—Ç–æ—Ä–∞ —Ü–∏—Ç–∞—Ç—ã

### –°–ª—É—á–∞–π–Ω–∞—è —Ü–∏—Ç–∞—Ç–∞ (–∫–æ–º–∞–Ω–¥–∞ `/citation`):
- –°–ª—É—á–∞–π–Ω–∞—è —Ü–∏—Ç–∞—Ç–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ `—Ü–∏—Ç–∞—Ç—ã`
- –°–ª—É—á–∞–π–Ω–∞—è —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è
- _–ö—É—Ä—Å–∏–≤–æ–º_ –≤—ã–¥–µ–ª–µ–Ω–Ω–æ–µ –∏–º—è –∞–≤—Ç–æ—Ä–∞ —Ü–∏—Ç–∞—Ç—ã

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

- .NET 8.0
- Entity Framework Core
- SQL Server
- Telegram.Bot
- Quartz.NET –¥–ª—è –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–¥–∞—á
- Forismatic API –¥–ª—è —Ü–∏—Ç–∞—Ç
- Unsplash API –¥–ª—è —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π

## –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

–í—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–∞–∫–µ—Ç—ã NuGet —É–∫–∞–∑–∞–Ω—ã –≤ —Ñ–∞–π–ª–µ –ø—Ä–æ–µ–∫—Ç–∞:
- Microsoft.EntityFrameworkCore.SqlServer
- Microsoft.EntityFrameworkCore.Design
- Microsoft.Extensions.Configuration.Json
- Microsoft.Extensions.Hosting
- Newtonsoft.Json
- Quartz
- Telegram.Bot 